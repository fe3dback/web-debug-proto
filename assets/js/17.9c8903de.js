(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{377:function(e,t,a){"use strict";a.r(t);var r=a(43),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"log"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#log"}},[e._v("#")]),e._v(" Log")]),e._v(" "),a("event-definition",{attrs:{type:"log",definedIn:null,payload:[{key:"message",type:"string",required:!0,description:"full log text",example:'"User X is logged in admin panel"'},{key:"context",type:"string",required:!1,description:"additional log context, should be free-form json in string",example:'"{\\"user_id\\": 12345}"'}]}}),e._v(" "),a("h4",{attrs:{id:"server-recommendations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-recommendations"}},[e._v("#")]),e._v(" Server recommendations")]),e._v(" "),a("ul",[a("li",[e._v('DO NOT add date-time to message prefix. For example "'),a("code",[e._v("[14:12:20] Hello world")]),e._v('".')])]),e._v(" "),a("h4",{attrs:{id:"client-rules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#client-rules"}},[e._v("#")]),e._v(" Client rules")]),e._v(" "),a("ul",[a("li",[e._v('Use different colors for different log levels, for example red for "errors", blue for "info", etc..')]),e._v(" "),a("li",[e._v("Display log context in read-only text field")]),e._v(" "),a("li",[e._v("Truncate context to max 4096 symbols")])]),e._v(" "),a("h4",{attrs:{id:"client-recommendations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#client-recommendations"}},[e._v("#")]),e._v(" Client recommendations")]),e._v(" "),a("ul",[a("li",[e._v("Highlight context field as JSON")]),e._v(" "),a("li",[e._v("Hide context by default and show only after user click on log")])]),e._v(" "),a("h4",{attrs:{id:"importance-map-table-mapped-level-to-int"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#importance-map-table-mapped-level-to-int"}},[e._v("#")]),e._v(" importance map table (mapped level to int)")]),e._v(" "),a("p",[e._v("property "),a("code",[e._v("importance")]),e._v(" can by "),a("code",[e._v("int")]),e._v(" "),a("code",[e._v("[from 1 to 8]")]),e._v(", so you need to map "),a("code",[e._v("log levels")]),e._v(" to event "),a("code",[e._v("importance")])]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("level")]),e._v(" "),a("th",[e._v("importance")]),e._v(" "),a("th",[e._v("description")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("debug")]),e._v(" "),a("td",[e._v("1")]),e._v(" "),a("td",[e._v("Detailed debug information")])]),e._v(" "),a("tr",[a("td",[e._v("info")]),e._v(" "),a("td",[e._v("2")]),e._v(" "),a("td",[e._v("Interesting events. Examples: User logs in")])]),e._v(" "),a("tr",[a("td",[e._v("notice")]),e._v(" "),a("td",[e._v("3")]),e._v(" "),a("td",[e._v("Normal but significant events")])]),e._v(" "),a("tr",[a("td",[e._v("warning")]),e._v(" "),a("td",[e._v("4")]),e._v(" "),a("td",[e._v("Exceptional occurrences that are not errors. Examples: Use of deprecated APIs, poor use of an API, undesirable things that are not necessarily wrong")])]),e._v(" "),a("tr",[a("td",[e._v("error")]),e._v(" "),a("td",[e._v("5")]),e._v(" "),a("td",[e._v("Runtime errors that do not require immediate action but should typically be logged and monitored")])]),e._v(" "),a("tr",[a("td",[e._v("critical")]),e._v(" "),a("td",[e._v("6")]),e._v(" "),a("td",[e._v("Critical conditions. Example: Application component unavailable, unexpected exception")])]),e._v(" "),a("tr",[a("td",[e._v("alert")]),e._v(" "),a("td",[e._v("7")]),e._v(" "),a("td",[e._v("Action must be taken immediately. Example: Entire website down, database unavailable, etc. This should trigger the SMS alerts and wake you up")])]),e._v(" "),a("tr",[a("td",[e._v("emergency")]),e._v(" "),a("td",[e._v("8")]),e._v(" "),a("td",[e._v("Emergency: system is unusable")])])])]),e._v(" "),a("h2",{attrs:{id:"query"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#query"}},[e._v("#")]),e._v(" Query")]),e._v(" "),a("event-definition",{attrs:{type:"query",payload:[{key:"target",type:"string",required:!0,description:"query target, for example db, io, cache or service name (mysql, influxdb, redis, rabbitmq, etc..). Used in client for group all request to same service",example:['"mysql"','"mongodb"']},{key:"query",type:"string",required:!0,description:"request query string",example:['"SELECT * FROM articles WHERE ID = 2;"','"{ status: \\"A\\", qty: { $lt: 30 } }"']},{key:"syntax",type:"string",required:!1,description:"syntax for query highlight in client",example:['"sql"','"json"'],enumValues:["sql","json","xml","text"]}]}}),e._v(" "),a("h4",{attrs:{id:"client-rules-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#client-rules-2"}},[e._v("#")]),e._v(" Client rules")]),e._v(" "),a("ul",[a("li",[e._v("Display total execution duration/count for all queries by each "),a("code",[e._v("target")]),e._v(". For example:\n"),a("ul",[a("li",[e._v("target "),a("code",[e._v("mysql")]),e._v(" 7 requests, total 210 ms.")]),e._v(" "),a("li",[e._v("target "),a("code",[e._v("redis")]),e._v(" 12 requests, total 64 ms.")])])])]),e._v(" "),a("h4",{attrs:{id:"client-recommendations-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#client-recommendations-2"}},[e._v("#")]),e._v(" Client recommendations")]),e._v(" "),a("ul",[a("li",[e._v("Highlight "),a("code",[e._v("query")]),e._v(" by file type defined in "),a("code",[e._v("syntax")]),e._v(" field. If field "),a("code",[e._v("syntax")]),e._v(" is not set, do not highlight query.")]),e._v(" "),a("li",[e._v("hide full query under cut, if length of "),a("code",[e._v("query")]),e._v(" field is >= 512 chars")])]),e._v(" "),a("h2",{attrs:{id:"request"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request"}},[e._v("#")]),e._v(" Request")]),e._v(" "),a("event-definition",{attrs:{type:"request",definedIn:null,payload:[{key:"method",type:"method",required:!1,description:"request HTTP method",example:'"POST"'},{key:"uri",type:"uri",required:!1,description:"full request uri",example:'"/api/hello?foo=bar"'},{key:"headers",type:"param[]",required:!1,description:"list of received request headers",example:'[{"key": "accept", "value": "text/html"}, {"key": "cache-control", "value": "no-cache"}]'},{key:"query",type:"param[]",required:!1,description:"list of received request query (GET) params",example:'[{"key": "foo", "value": "bar"}]'},{key:"body",type:"param[]",required:!1,description:"list of received request body (POST) params",example:'[{"key": "foo", "value": "bar"}]'},{key:"cookies",type:"param[]",required:!1,description:"list of received request cookies",example:'[{"key": "PHPSESS", "value": "l6q632qbzua97o3p2p71biefbkrijbil"}, {"key": "_ym_uid", "value": "15356948596"}]'},{key:"session",type:"param[]",required:!1,description:"loaded session params",example:'[{"key": "userid", "value": 21114}, {"key": "views_count", "value": 23}]'}]}}),e._v(" "),a("h2",{attrs:{id:"response"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response"}},[e._v("#")]),e._v(" Response")]),e._v(" "),a("event-definition",{attrs:{type:"response",definedIn:null,calledFrom:null,payload:[{key:"memoryPeak",type:"byte",required:!1,description:"max/peak memory usage (in bytes) during request",example:"1024"}]}}),e._v(" "),a("h4",{attrs:{id:"server-rules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-rules"}},[e._v("#")]),e._v(" Server rules")]),e._v(" "),a("ul",[a("li",[e._v("Use "),a("code",[e._v("duration")]),e._v(" field for total request time")])]),e._v(" "),a("h2",{attrs:{id:"middleware"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#middleware"}},[e._v("#")]),e._v(" Middleware")]),e._v(" "),a("event-definition",{attrs:{type:"middleware",payload:[{key:"name",type:"string",required:!0,description:"Middleware name",example:'"\\\\Illuminate\\\\Routing\\\\Middleware\\\\ThrottleRequests"'}]}}),e._v(" "),a("h2",{attrs:{id:"template"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#template"}},[e._v("#")]),e._v(" Template")]),e._v(" "),a("event-definition",{attrs:{type:"template",payload:[{key:"name",type:"string",required:!0,description:"executed/rendered template name",example:'"/resources/templates/header.twig"'}]}}),e._v(" "),a("h2",{attrs:{id:"email"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#email"}},[e._v("#")]),e._v(" Email")]),e._v(" "),a("event-definition",{attrs:{type:"email",payload:[{key:"subject",type:"string",required:!0,description:"mail subject (title)",example:'"Welcome to our forum"'},{key:"body",type:"html",required:!0,description:"email content (html or plain text)",example:'"<h1>Hello John</h1> <p>Now you are member of our great C++ community!</p>"'},{key:"from",type:"string",required:!0,description:"sender email address",example:'"no-reply@example.com"'},{key:"to",type:"string[]",required:!0,description:"to email addresses",example:'["john_doe@example.com", "admin@example.com"]'},{key:"cc",type:"string[]",required:!1,description:"CC addresses",example:'["john_doe@example.com", "admin@example.com"]'},{key:"bcc",type:"string[]",required:!1,description:"BCC addresses",example:'["john_doe@example.com", "admin@example.com"]'},{key:"replyTo",type:"string",required:!1,description:"reply-to target email address",example:'"contact@forum.example.com"'},{key:"attachments",type:"string[]",required:!1,description:"list of attachment file names (without actual content)",example:'["payment-info.pdf"]'}]}}),e._v(" "),a("h4",{attrs:{id:"client-recommendations-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#client-recommendations-3"}},[e._v("#")]),e._v(" Client recommendations")]),e._v(" "),a("ul",[a("li",[e._v("Use editor with html syntax highlight for body")]),e._v(" "),a("li",[e._v("If possible add preview mode for body with rendered html")])]),e._v(" "),a("h2",{attrs:{id:"event"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event"}},[e._v("#")]),e._v(" Event")]),e._v(" "),a("event-definition",{attrs:{type:"event",payload:[{key:"name",type:"string",required:!0,description:"Called event name (listener class, id, etc..)",example:'"ConsoleHandler::onCommand"'},{key:"group",type:"string",required:!1,description:"Helpful if you want split event by logic groups (kernel, loader, app, etc..)",example:'"kernel"'}]}}),e._v(" "),a("h2",{attrs:{id:"access-check"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#access-check"}},[e._v("#")]),e._v(" Access Check")]),e._v(" "),a("p",[e._v("Access checking based on ACO (Access control objects) or ACL (access control list).")]),e._v(" "),a("event-definition",{attrs:{type:"accessCheck",payload:[{key:"access",type:"aclVote",required:!0,description:"result of checking permission (GRANT/DENIED)",example:'"GRANT"'},{key:"control",type:"string",required:!0,description:"name of object with restricted access",example:'"Engines"'},{key:"object",type:"string",required:!1,description:"name of requester object (who want get restricted access)",example:'"R2-D2"'},{key:"action",type:"string",required:!1,description:"name of required action",example:'"publish"'}]}}),e._v(" "),a("h4",{attrs:{id:"for-example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#for-example"}},[e._v("#")]),e._v(" For example:")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Who/Where")]),e._v(" "),a("th",[e._v("Cockpit")]),e._v(" "),a("th",[e._v("Lounge")]),e._v(" "),a("th",[e._v("Guns")]),e._v(" "),a("th",[e._v("Engines")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Han")]),e._v(" "),a("td",[e._v("Y")]),e._v(" "),a("td",[e._v("Y")]),e._v(" "),a("td",[e._v("Y")]),e._v(" "),a("td",[e._v("Y")])]),e._v(" "),a("tr",[a("td",[e._v("Chewie")]),e._v(" "),a("td",[e._v("Y")]),e._v(" "),a("td",[e._v("Y")]),e._v(" "),a("td",[e._v("Y")]),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[e._v("Obi-wan")]),e._v(" "),a("td"),e._v(" "),a("td",[e._v("Y")]),e._v(" "),a("td"),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[e._v("Luke")]),e._v(" "),a("td"),e._v(" "),a("td",[e._v("Y")]),e._v(" "),a("td"),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[e._v("R2-D2")]),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td",[e._v("Y")])]),e._v(" "),a("tr",[a("td",[e._v("C3PO")]),e._v(" "),a("td"),e._v(" "),a("td",[e._v("Y")]),e._v(" "),a("td"),e._v(" "),a("td")])])]),e._v(" "),a("p",[e._v("can "),a("code",[e._v("R2-D2")]),e._v(" access to "),a("code",[e._v("Cockpit")]),e._v("?")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"access"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"DENIED"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"control"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Cockpit"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"object"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"R2-D2"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("can "),a("code",[e._v("R2-D2")]),e._v(" access to "),a("code",[e._v("Engines")]),e._v("?")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"access"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"GRANT"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"control"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Engines"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"object"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"R2-D2"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("can "),a("code",[e._v("user admin")]),e._v(" access to "),a("code",[e._v("publish")]),e._v(" object "),a("code",[e._v("article helloWorld")]),e._v("?")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"access"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"GRANT"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"control"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"article:helloWorld"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"object"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"user:admin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"action"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"publish"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h4",{attrs:{id:"how-to-use-this-with-votes-system"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#how-to-use-this-with-votes-system"}},[e._v("#")]),e._v(" How to use this with votes system")]),e._v(" "),a("p",[e._v("You can add votes mapped by access (GRANT = vote up, DENIED = vote down),")]),e._v(" "),a("p",[e._v("Final result of voting can be added with higher importance")])],1)}),[],!1,null,null,null);t.default=s.exports}}]);